import requests from bs4 import BeautifulSoup from datetime import datetime URL = "https://www.vrt.be/vrtmax/tv-gids/" # Woorden die vaak gebruikt worden om premières aan te duiden PREMIERE_KEYWORDS = [ "première", "eerste uitzending", "nieuw", "nieuw op tv", "nieuwe reeks", "nieuwe aflevering", "tv-première", ] def haal_programmas_op(): response = requests.get(URL) response.raise_for_status() soup = BeautifulSoup(response.text, "html.parser") programma_lijst = [] # VRT MAX gebruikt <article> blokken voor programma's for blok in soup.find_all("article"): titel_tag = blok.find("h3") beschrijving_tag = blok.find("p") if not titel_tag: continue titel = titel_tag.get_text(strip=True) beschrijving = beschrijving_tag.get_text(strip=True) if beschrijving_tag else "" programma_lijst.append({ "titel": titel, "beschrijving": beschrijving }) return programma_lijst def detecteer_premieres(programmas): premieres = [] for p in programmas: tekst = (p["titel"] + " " + p["beschrijving"]).lower() # Zoek naar premiere-keywords if any(keyword in tekst for keyword in PREMIERE_KEYWORDS): premieres.append(p) # Extra heuristiek: films van dit jaar if "2024" in tekst or "2025" in tekst or "2026" in tekst: if "film" in tekst or "thriller" in tekst or "drama" in tekst: premieres.append(p) # Dubbele verwijderen unieke = [] seen = set() for p in premieres: if p["titel"] not in seen: unieke.append(p) seen.add(p["titel"]) return unieke def genereer_html(premieres): datum = datetime.now().strftime("%d/%m/%Y") html = f""" <html> <head> <meta charset="utf-8"> <title>TV Premieres Vlaanderen</title> <style> body {{ font-family: Arial; padding: 20px; }} h1 {{ color: #333; }} li {{ margin-bottom: 12px; }} </style> </head> <body> <h1>TV-premières in Vlaanderen</h1> <p>Laatst bijgewerkt: {datum}</p> <ul> """ if premieres: for p in premieres: html += f"<li><strong>{p['titel']}</strong><br>{p['beschrijving']}</li>" else: html += "<li>Geen premières gevonden vandaag.</li>" html += """ </ul> </body> </html> """ with open("index.html", "w", encoding="utf-8") as f: f.write(html) if __name__ == "__main__": programmas = haal_programmas_op() premieres = detecteer_premieres(programmas) genereer_html(premieres)
